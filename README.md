# NetAlign
Framework for developing and testing graph-matching/network-alignment algorithms.

## Prerequistes
The suggested way to use this frameworks is within a virtual environment. The list of required packages can be found in `environment.yaml`.
If you use _conda_, it is possibile to create a new environment from the `yaml` file with:
```
conda env create -f environment.yaml
```

Then, you can activate the environment using:
```
conda activate netalign
```

## Run tests
The tests are located in `tests` folder. The available tests are:
- Robustness test (`robustness.py`): Given a source network, test the predicted alignment between the source network and an artificial target network genereted from the source. The target network is generated by permuting the node indices and adding/removing edges with probability.
- Homology test (`homology_test.py`): test the alignment between a source and a target network. The groundtuth is manually generated using the principle of _name omology_: nodes with the same names are considered to be aligned.
- Homology degree test (`homology_degree.py`): as before, but the portion of groundtruth to use for training is generetad using those nodes that 1) have the same name, 2) have an high degree in both networks. A node is considered an _high degree_ node, if its degree value belong to the top `p` percent of degrees, where `p` is an input float argument between 0 and 1.
- Real alignment test (`real.py`): generate an alignment between a source and a target network. If a groundtruth is given confront the predicted alignment with the groundtruth, otherwise simply return the predicted alignment. For supervised learning-based models, a set of seed groundtruth alignments is always required to train the models.
- Accuracy vs. Train ratio test (`train_ratio.py`): measures how the matching accuracy varies as the size of groundtruth alignments to use for training increases. The test is performed in terms of noise resistance between a source networka and a synthetically generated target network (as in `robustness.py`). The level of noise to introduce in the target network, as well if generate noise by adding or removing edges, are passed as arguments of the test.
- Split-on-graph test (`split_on_graphs.py`): test SHELLEY accuracy when it is trained using the _split-on-graphs_ training mode. A dataset of `N` network pairs is generetad from a real source network. The source network in each pair is always the same, the target networks instead are randomly generated as described for _robustness test_. The dataset is then splitted in training, validation and test set, and, in each phase, the whole groundtruth is used. This means that no seed groundtruth alignments are used during the test phase, but the model can only relays on the parameters learned during the training phase.
- [BETA] Embedding scores test (`embedding_score.py`): analyze the ndoe embeddings produced by a learning-based algorithm during the prediction of the alignment. Return a pair of values `(pos_score, struct_score)`. The first valure says how much two nodes tend to have similar embeddings if they are "_close_" within the network. The second value says how much two nodes tend to have similar embeddings if they show similar connection patterns with their neighbors. This test needs to be refined.

To run a test, position in the main directory and run:
```
python -m test/test_name <argument>
```
